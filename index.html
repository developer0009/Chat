<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Groupt Chat With Randoms</title>
<link rel="icon" href="https://tse2.mm.bing.net/th?id=OIP.bSMhM8mnSNyApdOuMWWYigHaFs&pid=Api&P=0">
  
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/styles/app.css" />
</head>
  </head>
  <body>
<h1 class="text-center mt-3">Chat With any random person !!!</h1>
<div class="par">
<div class="messages-block"></div>
<div class="input-group mx-auto block">
   
  <input type="text" class="form-control size" placeholder="Send message" aria-label="Recipient's username" aria-describedby="basic-addon2" id="msg">
  <span class="input-group-text btn btn-success" id="basic-addon2" type="button"><i class="fa-solid fa-paper-plane"></i></span> 

</div>
</div>
    <script type="module">
      import { io } from "https://cdn.socket.io/4.4.1/socket.io.esm.min.js";
      const socket = io();
const addUp = (name,value)=>{
const div = document.createElement("div")
div.innerHTML= name+ "  <i class=\"fa-solid fa-user\"></i>" +" : "+ value;  
messages.append(div);
            
 div.style.marginBottom="10px";
window.scrollTo(0,div.scrollHeight)
}
     let name = prompt("enter your name !!")
const messages = document.getElementsByClassName("messages-block")[0];   
  while(!name) name = prompt("enter your name")
     const input = document.getElementById("msg")
    document.getElementById("basic-addon2").addEventListener("click",(evt)=>{
          if(input.value){
            socket.emit('chat-message', name,input.value);
            addUp("You ",input.value)
           input.value=""
          }
});
   
    socket.on("append-messages",(name,value)=>{
        addUp(name,value)
})
    </script>
  </body>
</html>
